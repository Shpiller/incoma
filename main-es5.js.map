{"version":3,"sources":["/./$_lazy_route_resource lazy namespace object","/./src/app/app.component.html","/./src/app/modules/book-card/book-card.component.html","/./src/app/modules/books/books.component.html","/./src/app/modules/books/modules/books-search/books-search.component.html","/./src/app/modules/favourites/favourites.component.html","/./src/app/modules/navigation/navigation.component.html","/./src/app/app-routing.module.ts","/./src/app/app.component.scss","/./src/app/app.component.ts","/./src/app/app.module.ts","/./src/app/interceptors/errors.interceptor.ts","/./src/app/interceptors/url.interceptor.ts","/./src/app/modules/book-card/book-card.component.scss","/./src/app/modules/book-card/book-card.component.ts","/./src/app/modules/book-card/book-card.module.ts","/./src/app/modules/books/books.component.scss","/./src/app/modules/books/books.component.ts","/./src/app/modules/books/books.module.ts","/./src/app/modules/books/modules/books-search/books-search.component.scss","/./src/app/modules/books/modules/books-search/books-search.component.ts","/./src/app/modules/books/modules/books-search/books-search.module.ts","/./src/app/modules/books/services/books/books.service.ts","/./src/app/modules/books/store/books.actions.ts","/./src/app/modules/books/store/books.effects.ts","/./src/app/modules/books/store/books.reducer.ts","/./src/app/modules/books/store/books.store.ts","/./src/app/modules/favourites/favourites.component.scss","/./src/app/modules/favourites/favourites.component.ts","/./src/app/modules/favourites/favourites.module.ts","/./src/app/modules/navigation/navigation.component.scss","/./src/app/modules/navigation/navigation.component.ts","/./src/app/modules/navigation/navigation.module.ts","/./src/app/providers/window.providers.ts","/./src/app/serializers/custom-route.serializer.ts","/./src/app/services/favourites/favourites.service.ts","/./src/app/services/storage/storage.service.ts","/./src/app/store/app.store.ts","/./src/environments/environment.ts","/./src/main.ts"],"names":[],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","module.exports = \"<ng-container *ngIf=\\\"loadingApp\\\">\\n    <div style=\\\"display: block; width: 100%; text-align: center; line-height: 100vh\\\">App Loading...</div>\\n</ng-container>\\n<section class=\\\"section\\\">\\n    <app-navigation></app-navigation>\\n</section>\\n<section class=\\\"section\\\">\\n    <router-outlet (activate)=\\\"loadingApp = false\\\"></router-outlet>\\n</section>\\n\"","module.exports = \"<div class=\\\"card\\\">\\n    <div class=\\\"card-content\\\">\\n        <div class=\\\"media\\\">\\n            <div\\n                class=\\\"media-left favourites-toggle\\\"\\n                (click)=\\\"toggleFavourites.emit()\\\"\\n                [class.has-text-link]=\\\"isFavourite\\\"\\n                [class.has-text-grey-light]=\\\"!isFavourite\\\">\\n                <span class=\\\"icon is-small\\\"><fa-icon [icon]=\\\"faHeart\\\"></fa-icon></span>\\n            </div>\\n            <div class=\\\"media-content\\\">\\n                <p class=\\\"title is-4\\\">{{book.volumeInfo.title}}</p>\\n                <p class=\\\"subtitle is-6\\\">{{book.volumeInfo.subtitle}}</p>\\n            </div>\\n        </div>\\n        <div class=\\\"content\\\">\\n\\n        </div>\\n    </div>\\n</div>\\n\\n<!--<div class=\\\"container\\\" (click)=\\\"toggleFavourites.emit()\\\">-->\\n<!--    <span *ngIf=\\\"isFavourite; else no\\\">+</span>-->\\n<!--    <ng-template #no>-->\\n<!--        <span>-</span>-->\\n<!--    </ng-template>-->\\n<!--</div>-->\\n<!--<span> {{book.volumeInfo.title}}. {{book.volumeInfo.subtitle}}</span>-->\\n\\n\"","module.exports = \"<div class=\\\"container\\\">\\n    <app-books-search\\n        [query]=\\\"query\\\"\\n        [searchLoading]=\\\"getBooksLoading()\\\"\\n        (search)=\\\"searchBooks($event)\\\">\\n    </app-books-search>\\n</div>\\n\\n<div class=\\\"container status\\\">\\n    <div class=\\\"notification is-medium\\\">\\n        <span *ngIf=\\\"getBooksLoading(); else statusShowResults\\\">Выполняется поиск...</span>\\n        <ng-template #statusShowResults>\\n            <span *ngIf=\\\"!booksResponse; else statusResults\\\">Начните поиск...</span>\\n        </ng-template>\\n        <ng-template #statusResults>\\n            <span *ngIf=\\\"!booksResponse.items?.length; else statusShowItems\\\">\\n                По Вашему запросу ничего не найдено\\n            </span>\\n        </ng-template>\\n        <ng-template #statusShowItems>\\n            <span>Найдено всего: {{booksResponse.totalItems}}</span>\\n        </ng-template>\\n    </div>\\n</div>\\n\\n<div class=\\\"container\\\" *ngIf=\\\"booksResponse?.items?.length\\\">\\n\\n    <div class=\\\"container\\\" *ngFor=\\\"let book of booksResponse.items; let i = index;\\\">\\n        <app-book-card\\n            [book]=\\\"book\\\"\\n            [isFavourite]=\\\"!!favouritesMap[book.id]\\\"\\n            (toggleFavourites)=\\\"toggleFavourites(book)\\\"></app-book-card>\\n    </div>\\n\\n    <div class=\\\"container next-page\\\" *ngIf=\\\"booksResponse.totalItems > booksResponse.items.length\\\">\\n        <div class=\\\"notification has-text-centered\\\" *ngIf=\\\"getNextBooksPageLoading(); else getNextPageButton\\\">\\n            <span class=\\\"is-medium\\\">Загружаем результаты...</span>\\n        </div>\\n\\n        <ng-template #getNextPageButton>\\n            <button class=\\\"button is-link is-medium is-fullwidth\\\" (click)=\\\"getNextPage()\\\">Загрузить ещё результаты\\n            </button>\\n        </ng-template>\\n    </div>\\n</div>\\n\"","module.exports = \"<form [formGroup]=\\\"searchForm\\\" novalidate>\\n    <div class=\\\"container\\\">\\n        <div class=\\\"field has-addons\\\">\\n            <p class=\\\"control is-expanded is-large\\\" [class.is-loading]=\\\"searchLoading\\\">\\n                <input\\n                    #inputElement\\n                    class=\\\"input is-large is-expanded\\\"\\n                    type=\\\"text\\\" placeholder=\\\"Начните поиск...\\\"\\n                    formControlName=\\\"query\\\" [maxlength]=\\\"maxlength\\\"/>\\n            </p>\\n            <p class=\\\"control\\\">\\n                <button type=\\\"button\\\" class=\\\"button is-large\\\" [disabled]=\\\"!inputElement.value\\\" (click)=\\\"clearSearch()\\\">\\n                    Clear\\n                </button>\\n            </p>\\n        </div>\\n    </div>\\n\\n</form>\\n\"","module.exports = \"<div *ngFor=\\\"let book of favourites; let i = index;\\\">\\n    <app-book-card\\n        [book]=\\\"book\\\" [isFavourite]=\\\"true\\\"\\n        (toggleFavourites)=\\\"removeFromFavourites(book.id)\\\"></app-book-card>\\n</div>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n    <div class=\\\"tabs is-centered is-large is-toggle\\\">\\n        <ul>\\n            <li\\n                routerLink=\\\"/\\\"\\n                routerLinkActive=\\\"is-active\\\"\\n                [routerLinkActiveOptions]=\\\"{ exact: true }\\\">\\n                <a>\\n                    <span class=\\\"icon is-small\\\"><fa-icon [icon]=\\\"faSearch\\\"></fa-icon></span>\\n                    <span>Поиск книг</span>\\n                </a>\\n            </li>\\n            <li\\n                routerLink=\\\"/favourites\\\"\\n                routerLinkActive=\\\"is-active\\\">\\n                <a>\\n                    <span class=\\\"icon is-small\\\"><fa-icon [icon]=\\\"faHeart\\\"></fa-icon></span>\\n                    <span>Избранное / {{countFavourites}}</span>\\n                </a>\\n            </li>\\n        </ul>\\n    </div>\\n</div>\\n\"","import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport {BooksComponent} from './modules/books/books.component';\nimport {FavouritesComponent} from './modules/favourites/favourites.component';\n\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: BooksComponent,\n    },\n    {\n        path: 'favourites',\n        component: FavouritesComponent,\n    },\n    {\n        path: '**',\n        redirectTo: '/',\n    },\n];\n\n@NgModule({\n    imports: [RouterModule.forRoot(routes)],\n    exports: [RouterModule]\n})\nexport class AppRoutingModule {\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJ9 */\"","import {Component} from '@angular/core';\n\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html',\n    styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n    loadingApp = true;\n\n\n}\n","import {BrowserModule} from '@angular/platform-browser';\nimport {NgModule} from '@angular/core';\n\nimport {AppRoutingModule} from './app-routing.module';\nimport {AppComponent} from './app.component';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {HTTP_INTERCEPTORS, HttpClientModule} from '@angular/common/http';\nimport {URLInterceptor} from './interceptors/url.interceptor';\nimport {ToastrModule} from 'ngx-toastr';\nimport {ErrorsInterceptor} from './interceptors/errors.interceptor';\nimport {StoreModule} from '@ngrx/store';\nimport {AppStore} from './store/app.store';\nimport {StoreRouterConnectingModule} from '@ngrx/router-store';\nimport {EffectsModule} from '@ngrx/effects';\nimport {CustomRouterSerializer} from './serializers/custom-route.serializer';\nimport {NavigationModule} from './modules/navigation/navigation.module';\nimport {BooksModule} from './modules/books/books.module';\nimport {environment} from '../environments/environment';\nimport {StoreDevtoolsModule} from '@ngrx/store-devtools';\nimport {FavouritesModule} from './modules/favourites/favourites.module';\nimport {WINDOW_PROVIDERS} from './providers/window.providers';\n\n@NgModule({\n    declarations: [\n        AppComponent,\n    ],\n    imports: [\n        BrowserModule,\n        BrowserAnimationsModule,\n        AppRoutingModule,\n        HttpClientModule,\n        ToastrModule.forRoot(),\n        StoreModule.forRoot(AppStore.reducers, {\n            metaReducers: AppStore.metaReducers,\n            runtimeChecks: {\n                strictStateImmutability: true,\n                strictActionImmutability: true\n            }\n        }),\n        StoreRouterConnectingModule.forRoot({\n            serializer: CustomRouterSerializer,\n        }),\n        EffectsModule.forRoot([]),\n        NavigationModule,\n        BooksModule,\n        FavouritesModule,\n        !environment.production ? StoreDevtoolsModule.instrument({maxAge: 50}) : [],\n    ],\n    providers: [\n        {\n            provide: HTTP_INTERCEPTORS,\n            useClass: URLInterceptor,\n            multi: true,\n        },\n        {\n            provide: HTTP_INTERCEPTORS,\n            useClass: ErrorsInterceptor,\n            multi: true,\n        },\n        WINDOW_PROVIDERS,\n    ],\n    bootstrap: [AppComponent]\n})\nexport class AppModule {\n}\n","import {HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from '@angular/common/http';\nimport {Injectable, Injector} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {tap} from 'rxjs/operators';\nimport {ToastrService} from 'ngx-toastr';\n\n@Injectable()\nexport class ErrorsInterceptor implements HttpInterceptor {\n    constructor(private injector: Injector) {\n    }\n\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        return next.handle(req).pipe(\n            tap(\n                event => {\n                },\n                err => {\n\n                    let errorText = 'Unknown error';\n\n                    if (err && err instanceof HttpErrorResponse) {\n                        if (err.status === 401) {\n                            errorText = 'Auth error';\n                        } else if (err.status === 404) {\n                            errorText = '404 error';\n                        } else if (err.status !== 400) {\n                            errorText = 'Unknown HTTP error';\n                        }\n                    }\n\n                    const notify: ToastrService = this.injector.get(ToastrService);\n                    notify.error(errorText, null, {timeOut: 2000, closeButton: true});\n                }\n            )\n        );\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from '@angular/common/http';\nimport {Observable} from 'rxjs';\nimport {environment} from '../../environments/environment';\n\n@Injectable()\nexport class URLInterceptor implements HttpInterceptor {\n\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\n        req = req.clone({\n            url: `${environment.restUrl}${req.url}`,\n            setParams: {\n                ...req.params,\n                key: environment.apiKey,\n            }\n        });\n\n        return next.handle(req);\n    }\n}\n","module.exports = \".favourites-toggle {\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2FsZXhleS93b3JrL3R6L2luY29tYS90ei1pbmNvbWEvc3JjL2FwcC9tb2R1bGVzL2Jvb2stY2FyZC9ib29rLWNhcmQuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvYm9vay1jYXJkL2Jvb2stY2FyZC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvYm9vay1jYXJkL2Jvb2stY2FyZC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5mYXZvdXJpdGVzLXRvZ2dsZSB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuIiwiLmZhdm91cml0ZXMtdG9nZ2xlIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xufSJdfQ== */\"","import {ChangeDetectionStrategy, Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {BooksInterfaces} from '../books/interfaces/books.interfaces';\nimport {faHeart} from '@fortawesome/free-solid-svg-icons';\n\n@Component({\n    selector: 'app-book-card',\n    templateUrl: './book-card.component.html',\n    styleUrls: ['./book-card.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BookCardComponent implements OnInit {\n\n    @Input() book: BooksInterfaces.IVolume;\n    @Input() isFavourite: boolean;\n\n    faHeart = faHeart;\n\n    @Output() toggleFavourites: EventEmitter<void> = new EventEmitter();\n\n    constructor() {\n    }\n\n    ngOnInit() {\n    }\n\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {BookCardComponent} from './book-card.component';\nimport {FontAwesomeModule} from '@fortawesome/angular-fontawesome';\n\n@NgModule({\n    declarations: [BookCardComponent],\n    exports: [BookCardComponent],\n    imports: [\n        CommonModule,\n        FontAwesomeModule\n    ]\n})\nexport class BookCardModule {\n}\n","module.exports = \".container.status {\\n  margin-top: 20px;\\n  margin-bottom: 20px;\\n}\\n.container.next-page {\\n  margin-top: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2FsZXhleS93b3JrL3R6L2luY29tYS90ei1pbmNvbWEvc3JjL2FwcC9tb2R1bGVzL2Jvb2tzL2Jvb2tzLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9tb2R1bGVzL2Jvb2tzL2Jvb2tzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNJO0VBQ0ksZ0JBQUE7RUFDQSxtQkFBQTtBQ0FSO0FER0k7RUFDSSxnQkFBQTtBQ0RSIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9ib29rcy9ib29rcy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXJ7XG4gICAgJi5zdGF0dXMge1xuICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgIH1cblxuICAgICYubmV4dC1wYWdlIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICB9XG59XG4iLCIuY29udGFpbmVyLnN0YXR1cyB7XG4gIG1hcmdpbi10b3A6IDIwcHg7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG59XG4uY29udGFpbmVyLm5leHQtcGFnZSB7XG4gIG1hcmdpbi10b3A6IDIwcHg7XG59Il19 */\"","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    Inject,\n    OnChanges,\n    OnDestroy,\n    OnInit\n} from '@angular/core';\nimport {BooksInterfaces} from './interfaces/books.interfaces';\nimport {select, Store} from '@ngrx/store';\nimport {fromEvent, Subscription} from 'rxjs';\nimport {debounceTime, filter, map} from 'rxjs/operators';\nimport {CommonInterfaces} from '../../interfaces/common.interfaces';\nimport {BooksActions} from './store/books.actions';\nimport {BooksStore} from './store/books.store';\nimport {WINDOW} from '../../providers/window.providers';\nimport {DOCUMENT} from '@angular/common';\nimport {FavouritesService} from '../../services/favourites/favourites.service';\nimport {faSpinner} from '@fortawesome/free-solid-svg-icons/faSpinner';\n\n@Component({\n    selector: 'app-books',\n    templateUrl: './books.component.html',\n    styleUrls: ['./books.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BooksComponent implements OnInit, OnChanges, OnDestroy {\n\n    query: string;\n    booksResponse: BooksInterfaces.IListResponse;\n    serviceLoading: CommonInterfaces.IMapOfBoolean;\n    favouritesMap: { [id: string]: BooksInterfaces.IVolume };\n\n    faSpinner = faSpinner;\n\n    private subscriptions: Subscription[] = [];\n\n    set subs(sub) {\n        this.subscriptions.push(sub);\n    }\n\n    constructor(private store$: Store<BooksStore.IState>,\n                private cdr: ChangeDetectorRef,\n                @Inject(DOCUMENT) private document: Document,\n                @Inject(WINDOW) private window: Window,\n                private favouritesService: FavouritesService) {\n    }\n\n    ngOnInit() {\n        this.favouritesMap = this.favouritesService.favouritesMap;\n        this.initSubscriptions();\n    }\n\n    ngOnChanges() {\n    }\n\n    ngOnDestroy() {\n        this.subscriptions.forEach(s => s.unsubscribe());\n    }\n\n    private initSubscriptions() {\n\n        this.subs = this.store$.pipe(\n            select(BooksStore.Selects.self.query),\n            map(query => {\n                this.query = query;\n                this.cdr.detectChanges();\n            })\n        ).subscribe();\n\n        this.subs = this.store$.pipe(\n            select(BooksStore.Selects.self.booksResponse),\n            map(books => {\n                this.booksResponse = books;\n                this.cdr.detectChanges();\n            }),\n        ).subscribe();\n\n        this.subs = this.store$.pipe(\n            select(BooksStore.Selects.self.serviceLoading),\n            map(serviceLoading => {\n                this.serviceLoading = serviceLoading;\n                this.cdr.detectChanges();\n            }),\n        ).subscribe();\n\n        this.subs = fromEvent(this.window, 'mousewheel')\n            .pipe(\n                map((e: any) => e.wheelDelta),\n                debounceTime(300),\n                filter(wheelDelta => {\n\n                    const heightToEnd = this.document.body.clientHeight - this.window.innerHeight - this.window.pageYOffset;\n\n                    return wheelDelta < 0 && heightToEnd <= 0\n                        && !this.getBooksLoading() && !this.getNextBooksPageLoading()\n                        && this.booksResponse && this.booksResponse.totalItems > this.booksResponse.items.length;\n                }),\n                map(() => {\n                    this.store$.dispatch(new BooksActions.GetNextBooksPage());\n                }),\n            ).subscribe();\n    }\n\n    searchBooks(query: string) {\n        this.store$.dispatch(new BooksActions.GetBooks(query));\n    }\n\n    getNextPage() {\n        this.store$.dispatch(new BooksActions.GetNextBooksPage());\n    }\n\n    getBooksLoading() {\n        return this.serviceLoading && this.serviceLoading[BooksStore.SERVICE_LOADING.GET_BOOKS];\n    }\n\n    getNextBooksPageLoading() {\n        return this.serviceLoading && this.serviceLoading[BooksStore.SERVICE_LOADING.GET_NEXT_BOOKS_PAGE];\n    }\n\n    toggleFavourites(book: BooksInterfaces.IVolume) {\n        this.favouritesService.toggleFavourites(book);\n    }\n\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {BooksComponent} from './books.component';\nimport {BooksSearchModule} from './modules/books-search/books-search.module';\nimport {BooksStore} from './store/books.store';\nimport {StoreModule} from '@ngrx/store';\nimport {EffectsModule} from '@ngrx/effects';\nimport {BooksEffects} from './store/books.effects';\nimport {BookCardModule} from '../book-card/book-card.module';\nimport {FontAwesomeModule} from '@fortawesome/angular-fontawesome';\n\n\n@NgModule({\n    declarations: [BooksComponent],\n    exports: [BooksComponent],\n    imports: [\n        CommonModule,\n        BooksSearchModule,\n        StoreModule.forFeature(BooksStore.FEATURE_UID, BooksStore.mapReducers),\n        EffectsModule.forFeature([\n            BooksEffects,\n        ]),\n        BookCardModule,\n        FontAwesomeModule,\n    ]\n})\nexport class BooksModule {\n}\n","module.exports = \":focus {\\n  box-shadow: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2FsZXhleS93b3JrL3R6L2luY29tYS90ei1pbmNvbWEvc3JjL2FwcC9tb2R1bGVzL2Jvb2tzL21vZHVsZXMvYm9va3Mtc2VhcmNoL2Jvb2tzLXNlYXJjaC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvbW9kdWxlcy9ib29rcy9tb2R1bGVzL2Jvb2tzLXNlYXJjaC9ib29rcy1zZWFyY2guY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9ib29rcy9tb2R1bGVzL2Jvb2tzLXNlYXJjaC9ib29rcy1zZWFyY2guY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6Zm9jdXMge1xuICAgIGJveC1zaGFkb3c6IG5vbmU7XG59XG4iLCI6Zm9jdXMge1xuICBib3gtc2hhZG93OiBub25lO1xufSJdfQ== */\"","import {\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n    ViewChild\n} from '@angular/core';\nimport {FormBuilder, FormGroup} from '@angular/forms';\nimport {debounceTime, distinctUntilChanged, map} from 'rxjs/operators';\nimport {Subscription} from 'rxjs';\nimport {faTimes} from '@fortawesome/free-solid-svg-icons';\n\n@Component({\n    selector: 'app-books-search',\n    templateUrl: './books-search.component.html',\n    styleUrls: ['./books-search.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BooksSearchComponent implements OnInit, AfterViewInit, OnChanges, OnDestroy {\n\n    @Input() query: string;\n    @Input() searchLoading: boolean;\n    @Output() search: EventEmitter<string> = new EventEmitter();\n\n    @ViewChild('inputElement', {static: false}) inputElement: ElementRef;\n\n    faTimes = faTimes;\n\n    maxlength: 500;\n    searchForm: FormGroup;\n\n    private subscriptions: Subscription[] = [];\n\n    set subs(sub) {\n        this.subscriptions.push(sub);\n    }\n\n    constructor(private fb: FormBuilder) {\n    }\n\n    ngOnInit() {\n        this.initForm();\n    }\n\n    ngAfterViewInit() {\n        this.inputElement.nativeElement.focus();\n    }\n\n    ngOnChanges(simpleChanges: SimpleChanges) {\n\n        if (simpleChanges.query && this.searchForm) {\n            this.searchForm.patchValue({query: this.query}, {emitEvent: false});\n        }\n    }\n\n    ngOnDestroy() {\n        this.subscriptions.forEach(s => s.unsubscribe());\n    }\n\n    private initForm() {\n\n        this.searchForm = this.fb.group({\n            query: [this.query],\n        });\n\n        this.searchForm.controls.query.valueChanges\n            .pipe(\n                debounceTime(300),\n                distinctUntilChanged(),\n                map(query => {\n                    query = (query || '').trim().slice(0, this.maxlength);\n                    this.search.emit(query);\n                }),\n            ).subscribe();\n    }\n\n    clearSearch() {\n        this.searchForm.patchValue({query: ''});\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {BooksSearchComponent} from './books-search.component';\nimport {ReactiveFormsModule} from '@angular/forms';\nimport {FontAwesomeModule} from '@fortawesome/angular-fontawesome';\n\n\n@NgModule({\n    declarations: [BooksSearchComponent],\n    exports: [BooksSearchComponent],\n    imports: [\n        CommonModule,\n        ReactiveFormsModule,\n        FontAwesomeModule,\n    ]\n})\nexport class BooksSearchModule {\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BooksService {\n\n    constructor(private http: HttpClient) {\n    }\n\n    getBooks(query: string, startIndex: number = 0) {\n        return this.http.get(`volumes?q=${query}&startIndex=${startIndex}`);\n    }\n}\n","import {Action} from '@ngrx/store';\nimport {CommonInterfaces} from '../../../interfaces/common.interfaces';\nimport {BooksInterfaces} from '../interfaces/books.interfaces';\n\nexport namespace BooksActionTypes {\n\n    export const PATCH_SERVICE_LOADING = '[BooksActions] PATCH_SERVICE_LOADING';\n\n    export const GET_BOOKS = '[BooksActions] GET_BOOKS';\n    export const GET_BOOKS_SUCCESS = '[BooksActions] GET_BOOKS_SUCCESS';\n    export const GET_BOOKS_FAILED = '[BooksActions] GET_BOOKS_FAILED';\n\n    export const GET_NEXT_BOOKS_PAGE = '[BooksActions] GET_NEXT_BOOKS_PAGE';\n    export const GET_NEXT_BOOKS_PAGE_SUCCESS = '[BooksActions] GET_NEXT_BOOKS_PAGE_SUCCESS';\n    export const GET_NEXT_BOOKS_PAGE_FAILED = '[BooksActions] GET_NEXT_BOOKS_PAGE_FAILED';\n}\n\nexport namespace BooksActions {\n\n    export class PatchServiceLoading implements Action {\n\n        readonly type = BooksActionTypes.PATCH_SERVICE_LOADING;\n\n        constructor(public payload: CommonInterfaces.IMapOfBoolean) {\n        }\n    }\n\n    export class GetBooks implements Action {\n\n        readonly type = BooksActionTypes.GET_BOOKS;\n\n        constructor(public payload: string) {\n        }\n    }\n\n    export class GetBooksSuccess implements Action {\n\n        readonly type = BooksActionTypes.GET_BOOKS_SUCCESS;\n\n        constructor(public payload: BooksInterfaces.IListResponse) {\n        }\n    }\n\n    export class GetBooksFailed implements Action {\n\n        readonly type = BooksActionTypes.GET_BOOKS_FAILED;\n    }\n\n    export class GetNextBooksPage implements Action {\n\n        readonly type = BooksActionTypes.GET_NEXT_BOOKS_PAGE;\n    }\n\n    export class GetNextBooksPageSuccess implements Action {\n\n        readonly type = BooksActionTypes.GET_NEXT_BOOKS_PAGE_SUCCESS;\n\n        constructor(public payload: BooksInterfaces.IVolume[]) {\n        }\n    }\n\n    export class GetNextBooksPageFailed implements Action {\n\n        readonly type = BooksActionTypes.GET_NEXT_BOOKS_PAGE_FAILED;\n    }\n\n    export type All =\n        PatchServiceLoading\n        | GetBooks\n        | GetBooksSuccess\n        | GetBooksFailed\n        | GetNextBooksPage\n        | GetNextBooksPageSuccess\n        | GetNextBooksPageFailed;\n\n}\n","import {Injectable} from '@angular/core';\nimport {Actions, createEffect, ofType} from '@ngrx/effects';\nimport {catchError, concatMap, filter, map, switchMap, withLatestFrom} from 'rxjs/operators';\nimport {BooksService} from '../services/books/books.service';\nimport {BooksActions, BooksActionTypes} from './books.actions';\nimport {of} from 'rxjs';\nimport {CommonInterfaces} from '../../../interfaces/common.interfaces';\nimport {BooksStore} from './books.store';\nimport {BooksInterfaces} from '../interfaces/books.interfaces';\nimport {select, Store} from '@ngrx/store';\n\n@Injectable()\nexport class BooksEffects {\n\n    constructor(private actions$: Actions,\n                private booksService: BooksService,\n                private store$: Store<BooksStore.IState>) {\n    }\n\n    getBooks$ = createEffect(() =>\n        this.actions$.pipe(\n            ofType(BooksActionTypes.GET_BOOKS),\n            map((action: BooksActions.GetBooks) => action.payload),\n            switchMap(query => {\n\n                if (!query) {\n                    return of(new BooksActions.GetBooksSuccess(null));\n                } else {\n                    return this.booksService.getBooks(query)\n                        .pipe(\n                            map(books => {\n                                return new BooksActions.GetBooksSuccess(books as BooksInterfaces.IListResponse);\n                            }),\n                            catchError(() => of(new BooksActions.GetBooksFailed())),\n                        );\n                }\n            })\n        )\n    );\n\n    serviceLoadingBooks$ = createEffect(() =>\n        this.actions$.pipe(\n            ofType(BooksActionTypes.GET_BOOKS, BooksActionTypes.GET_BOOKS_SUCCESS, BooksActionTypes.GET_BOOKS_FAILED),\n            map((action: BooksActions.GetBooks | BooksActions.GetBooksSuccess | BooksActions.GetBooksFailed) => {\n\n                const flags: CommonInterfaces.IMapOfBoolean = {};\n                flags[BooksStore.SERVICE_LOADING.GET_BOOKS] = action.type === BooksActionTypes.GET_BOOKS;\n                flags[BooksStore.SERVICE_LOADING.GET_NEXT_BOOKS_PAGE] = false;\n\n                return new BooksActions.PatchServiceLoading(flags);\n            }),\n        )\n    );\n\n    getNextBooksPage$ = createEffect(() =>\n        this.actions$.pipe(\n            ofType(BooksActionTypes.GET_NEXT_BOOKS_PAGE),\n            withLatestFrom(\n                this.store$.pipe(select(BooksStore.Selects.self.query)),\n                this.store$.pipe(select(BooksStore.Selects.self.booksResponse)),\n            ),\n            filter(([action, query, booksResponse]) => booksResponse && booksResponse.totalItems > booksResponse.items.length),\n            concatMap(([action, query, booksResponse]) => {\n\n                return this.booksService.getBooks(query, booksResponse.items.length)\n                    .pipe(\n                        withLatestFrom(\n                            this.store$.pipe(select(BooksStore.Selects.self.serviceLoading))\n                        ),\n                        filter(([books, serviceLoading]) => {\n                            return serviceLoading[BooksStore.SERVICE_LOADING.GET_NEXT_BOOKS_PAGE];\n                        }),\n                        map(([books]) => {\n                            return new BooksActions.GetNextBooksPageSuccess((books as BooksInterfaces.IListResponse).items);\n                        }),\n                        catchError(() => of(new BooksActions.GetNextBooksPageFailed())),\n                    );\n            }),\n        )\n    );\n\n    serviceLoadingNextBooksPage$ = createEffect(() =>\n        this.actions$.pipe(\n            ofType(\n                BooksActionTypes.GET_NEXT_BOOKS_PAGE,\n                BooksActionTypes.GET_NEXT_BOOKS_PAGE_SUCCESS,\n                BooksActionTypes.GET_NEXT_BOOKS_PAGE_FAILED\n            ),\n            map((action: BooksActions.GetNextBooksPage | BooksActions.GetNextBooksPageSuccess | BooksActions.GetNextBooksPageFailed) => {\n\n                const flags: CommonInterfaces.IMapOfBoolean = {};\n                flags[BooksStore.SERVICE_LOADING.GET_NEXT_BOOKS_PAGE] = action.type === BooksActionTypes.GET_NEXT_BOOKS_PAGE;\n\n                return new BooksActions.PatchServiceLoading(flags);\n            }),\n        )\n    );\n}\n","import {createSelector, MemoizedSelector} from '@ngrx/store';\nimport {BooksActions, BooksActionTypes} from './books.actions';\nimport {BooksInterfaces} from '../interfaces/books.interfaces';\nimport {CommonInterfaces} from '../../../interfaces/common.interfaces';\n\nexport namespace BooksReducer {\n\n    export interface IState {\n        query: string;\n        booksResponse: BooksInterfaces.IListResponse;\n        serviceLoading: CommonInterfaces.IMapOfBoolean;\n    }\n\n    const initialState: IState = {\n        query: null,\n        booksResponse: null,\n        serviceLoading: {},\n    };\n\n    export interface ISelects {\n        query: (state: IState) => string;\n        booksResponse: (state: IState) => BooksInterfaces.IListResponse;\n        serviceLoading: (state: IState) => CommonInterfaces.IMapOfBoolean;\n    }\n\n    export function createStoreSelector(selector: MemoizedSelector<object, IState>) {\n\n        class Selects implements ISelects {\n            query = createSelector(selector, ((state: IState) => state.query));\n            booksResponse = createSelector(selector, ((state: IState) => state.booksResponse));\n            serviceLoading = createSelector(selector, ((state: IState) => state.serviceLoading));\n        }\n\n        return new Selects();\n    }\n\n    export function reducer(state: IState = {...initialState}, action: BooksActions.All): IState {\n\n        switch (action.type) {\n\n            case BooksActionTypes.PATCH_SERVICE_LOADING: {\n\n                const serviceLoading = {\n                    ...state.serviceLoading,\n                    ...action.payload,\n                };\n\n                return {\n                    ...state,\n                    serviceLoading,\n                };\n            }\n\n            case BooksActionTypes.GET_BOOKS: {\n\n                return {\n                    ...state,\n                    query: action.payload,\n                };\n            }\n\n            case BooksActionTypes.GET_BOOKS_SUCCESS: {\n\n                const booksResponse = action.payload ? {...action.payload} : null;\n\n                return {\n                    ...state,\n                    booksResponse,\n                };\n            }\n\n            case BooksActionTypes.GET_BOOKS_FAILED: {\n\n                return {\n                    ...state,\n                    booksResponse: null,\n                };\n            }\n\n            case BooksActionTypes.GET_NEXT_BOOKS_PAGE_SUCCESS: {\n\n                const items = state.booksResponse.items.concat(action.payload);\n\n                return {\n                    ...state,\n                    booksResponse: {\n                        ...state.booksResponse,\n                        items,\n                    },\n                };\n            }\n\n            default:\n                return state;\n        }\n    }\n}\n","import {BooksReducer} from './books.reducer';\nimport {ActionReducerMap, createFeatureSelector, createSelector} from '@ngrx/store';\nimport {AppStore} from '../../../store/app.store';\n\nexport namespace BooksStore {\n\n    export const FEATURE_UID = '[BooksStore] FEATURE_UID';\n\n    export const SERVICE_LOADING = {\n        GET_BOOKS: '[AppStore][SERVICE_LOADING] GET_BOOKS',\n        GET_NEXT_BOOKS_PAGE: '[AppStore][SERVICE_LOADING] GET_NEXT_BOOKS_PAGE',\n    };\n\n    interface IStore {\n        selfStore: BooksReducer.IState;\n    }\n\n    export interface IState extends AppStore.IState {\n        booksStore: IStore;\n    }\n\n    export const mapReducers: ActionReducerMap<IStore> = {\n        selfStore: BooksReducer.reducer,\n    };\n\n    export namespace Selects {\n\n        const featureSelector = createFeatureSelector<IStore>(FEATURE_UID);\n\n        // self\n\n        const selfSelector = createSelector(\n            featureSelector,\n            (state: IStore) => state.selfStore,\n        );\n\n        export const self = BooksReducer.createStoreSelector(selfSelector);\n\n\n    }\n\n\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvZmF2b3VyaXRlcy9mYXZvdXJpdGVzLmNvbXBvbmVudC5zY3NzIn0= */\"","import {Component, OnInit} from '@angular/core';\nimport {FavouritesService} from '../../services/favourites/favourites.service';\nimport {BooksInterfaces} from '../books/interfaces/books.interfaces';\n\n@Component({\n    selector: 'app-favourites',\n    templateUrl: './favourites.component.html',\n    styleUrls: ['./favourites.component.scss']\n})\nexport class FavouritesComponent implements OnInit {\n\n    favourites: BooksInterfaces.IVolume[] = [];\n\n    constructor(private favouritesService: FavouritesService) {\n    }\n\n    ngOnInit() {\n        this.favourites = this.favouritesService.favourites;\n    }\n\n    removeFromFavourites(id: string) {\n        this.favouritesService.removeFromFavourites(id);\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FavouritesComponent} from './favourites.component';\nimport {BookCardModule} from '../book-card/book-card.module';\n\n\n@NgModule({\n    declarations: [FavouritesComponent],\n    exports: [FavouritesComponent],\n    imports: [\n        CommonModule,\n        BookCardModule,\n    ]\n})\nexport class FavouritesModule {\n}\n","module.exports = \":focus {\\n  outline: none;\\n}\\n\\n.tabs ul {\\n  flex-shrink: 1;\\n  flex-wrap: wrap;\\n}\\n\\n@media (max-width: 768px) {\\n  .tabs ul li {\\n    width: 100%;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2FsZXhleS93b3JrL3R6L2luY29tYS90ei1pbmNvbWEvc3JjL2FwcC9tb2R1bGVzL25hdmlnYXRpb24vbmF2aWdhdGlvbi5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvbW9kdWxlcy9uYXZpZ2F0aW9uL25hdmlnYXRpb24uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxhQUFBO0FDQ0o7O0FERUE7RUFDSSxjQUFBO0VBQ0EsZUFBQTtBQ0NKOztBREVBO0VBQ0k7SUFDSSxXQUFBO0VDQ047QUFDRiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmZvY3VzIHtcbiAgICBvdXRsaW5lOiBub25lO1xufVxuXG4udGFicyB1bCB7XG4gICAgZmxleC1zaHJpbms6IDE7XG4gICAgZmxleC13cmFwOiB3cmFwO1xufVxuXG5AbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAudGFicyB1bCBsaSB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cbn1cbiIsIjpmb2N1cyB7XG4gIG91dGxpbmU6IG5vbmU7XG59XG5cbi50YWJzIHVsIHtcbiAgZmxleC1zaHJpbms6IDE7XG4gIGZsZXgtd3JhcDogd3JhcDtcbn1cblxuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gIC50YWJzIHVsIGxpIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxufSJdfQ== */\"","import {Component, OnInit} from '@angular/core';\nimport {FavouritesService} from '../../services/favourites/favourites.service';\nimport {faHeart, faSearch} from '@fortawesome/free-solid-svg-icons';\n\n@Component({\n    selector: 'app-navigation',\n    templateUrl: './navigation.component.html',\n    styleUrls: ['./navigation.component.scss']\n})\nexport class NavigationComponent implements OnInit {\n\n    faSearch = faSearch;\n    faHeart = faHeart;\n\n    get countFavourites() {\n        return this.favouritesService.favourites.length;\n    }\n\n    constructor(private favouritesService: FavouritesService) {\n    }\n\n    ngOnInit() {\n    }\n\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {NavigationComponent} from './navigation.component';\nimport {RouterModule} from '@angular/router';\nimport {FontAwesomeModule} from '@fortawesome/angular-fontawesome';\n\n@NgModule({\n    declarations: [NavigationComponent],\n    exports: [NavigationComponent],\n    imports: [\n        CommonModule,\n        RouterModule,\n        FontAwesomeModule,\n    ]\n})\nexport class NavigationModule {\n}\n","import {FactoryProvider, InjectionToken} from '@angular/core';\n\nexport const WINDOW = new InjectionToken<Window>('window');\n\nconst windowProvider: FactoryProvider = {\n    provide: WINDOW,\n    useFactory: () => window\n};\n\nexport const WINDOW_PROVIDERS = [\n    windowProvider\n];\n","import {RouterStateSerializer} from '@ngrx/router-store';\nimport {Params, RouterStateSnapshot} from '@angular/router';\n\nexport interface RouterStateUrl {\n    url: string;\n    params: Params;\n    queryParams: Params;\n    data: { [key: string]: any };\n}\n\nexport class CustomRouterSerializer implements RouterStateSerializer<RouterStateUrl> {\n    serialize(routerState: RouterStateSnapshot): RouterStateUrl {\n        let route = routerState.root;\n\n        while (route.firstChild) {\n            route = route.firstChild;\n        }\n\n        const {\n            url,\n            root: {queryParams},\n        } = routerState;\n        const {params, data} = route;\n\n        // Only return an object including the URL, params and query params\n        // instead of the entire snapshot\n        return {url, params, queryParams, data};\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {StorageService} from '../storage/storage.service';\nimport {BooksInterfaces} from '../../modules/books/interfaces/books.interfaces';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class FavouritesService {\n\n    private localKey = 'favourites';\n    private items: BooksInterfaces.IVolume[] = [];\n    private keyMap: { [id: string]: BooksInterfaces.IVolume } = {};\n\n    get favourites() {\n        return this.items;\n    }\n\n    get favouritesMap() {\n        return this.keyMap;\n    }\n\n    constructor(private storageService: StorageService) {\n        this.initItems();\n    }\n\n    private initItems() {\n        try {\n            const readItems = this.storageService.local.getItem(this.localKey);\n            this.items = JSON.parse(readItems) || [];\n\n            this.keyMap = this.items.reduce((prev, curr) => {\n                prev[curr.id] = curr;\n                return prev;\n            }, {});\n\n        } catch (e) {\n        }\n    }\n\n    toggleFavourites(book: BooksInterfaces.IVolume) {\n\n        if (this.keyMap[book.id]) {\n            this.removeFromFavourites(book.id);\n        } else {\n            this.addToFavourites(book);\n        }\n    }\n\n    private addToFavourites(book: BooksInterfaces.IVolume) {\n\n        this.items.push(book);\n        this.keyMap[book.id] = book;\n\n        this.saveItems();\n    }\n\n    removeFromFavourites(id: string) {\n\n        const item = this.keyMap[id];\n\n        this.items.splice(this.items.indexOf(item), 1);\n        delete this.keyMap[id];\n\n        this.saveItems();\n    }\n\n    private saveItems() {\n        this.storageService.local.setItem(this.localKey, JSON.stringify(this.items));\n    }\n}\n","import {Inject, Injectable} from '@angular/core';\nimport {WINDOW} from '../../providers/window.providers';\nimport {CommonInterfaces} from '../../interfaces/common.interfaces';\n\ninterface ILocalStorage extends Storage {\n    setItem(key: string, value: string, time?: number): void;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class StorageService {\n\n    private sessionData: CommonInterfaces.IMapOfString = {};\n\n    private get sessionLength() {\n        return Object.keys(this.sessionData).length;\n    }\n\n    public session: Storage;\n\n    private localData: CommonInterfaces.IMapOfString = {};\n\n    private get localLength() {\n        return Object.keys(this.localData).length;\n    }\n\n    public local: ILocalStorage;\n\n    constructor(@Inject(WINDOW) private window: Window) {\n\n        this.initSession();\n        this.initLocal();\n    }\n\n    private initSession() {\n\n        this.session = {\n            length: this.sessionLength,\n            clear: () => {\n                this.sessionData = {};\n            },\n            getItem: (key: string) => {\n                return this.sessionData[key];\n            },\n            key: (index: number) => {\n                return Object.keys(this.sessionData)[index];\n            },\n            removeItem: (key: string) => {\n                delete this.sessionData[key];\n            },\n            setItem: (key: string, value: string) => {\n                this.sessionData[key] = value;\n            },\n        };\n    }\n\n    private initLocal() {\n\n        const currentTime = (): number => {\n            // time in minutes\n            return Math.floor((new Date().getTime()) / (60 * 1000));\n        };\n\n        const expirationKey = (key: string): string => {\n            return key + '-cacheexpiration';\n        };\n\n        let localStorageWork = false;\n\n        try {\n            localStorageWork = (typeof this.window.localStorage === 'object');\n        } catch (e) {\n            localStorageWork = false;\n        }\n\n        if (localStorageWork) {\n            try {\n                this.window.localStorage.setItem('localStorage', '');\n                this.window.localStorage.removeItem('localStorage');\n            } catch (e) {\n                localStorageWork = false;\n            }\n        }\n\n        if (localStorageWork) {\n\n            // override setItem & getItem\n            const _setItem = Storage.prototype.setItem;\n            const _getItem = Storage.prototype.getItem;\n\n            const localStorage = this.window.localStorage;\n\n            Storage.prototype.setItem = function (key: string, value: string, time?: number): void {\n\n                _setItem.call(this, key, value);\n\n                if (time) {\n                    _setItem.call(this, expirationKey(key), (currentTime() + time).toString(10));\n                } else {\n                    localStorage.removeItem(expirationKey(key));\n                }\n            };\n\n            Storage.prototype.getItem = function (key: string): string | null {\n\n                const value = _getItem.call(this, key);\n                const expValue = _getItem.call(this, expirationKey(key));\n\n                if (expValue) {\n\n                    const expirationTime = parseInt(expValue, 10);\n\n                    if (currentTime() >= expirationTime) {\n\n                        localStorage.removeItem(key);\n                        localStorage.removeItem(expirationKey(key));\n\n                        return null;\n                    }\n                }\n\n                return value;\n            };\n            // overrides\n\n            this.local = localStorage;\n            return;\n        }\n\n        this.local = {\n            length: this.localLength,\n            clear: () => {\n                this.localData = {};\n            },\n            getItem: (key: string) => {\n                return this.localData[key];\n            },\n            key: (index: number) => {\n                return Object.keys(this.localData)[index];\n            },\n            removeItem: (key: string) => {\n                delete this.localData[key];\n            },\n            setItem: (key: string, value: string) => {\n                this.localData[key] = value;\n            },\n        };\n    }\n}\n","import {ActionReducerMap, createFeatureSelector, MetaReducer} from '@ngrx/store';\nimport {environment} from '../../environments/environment';\nimport {routerReducer, RouterReducerState} from '@ngrx/router-store';\n\nexport namespace AppStore {\n\n    export interface IState {\n        router: RouterReducerState;\n    }\n\n    export const reducers: ActionReducerMap<IState> = {\n        router: routerReducer,\n    };\n\n    export namespace Selects {\n\n        export const router = createFeatureSelector<IState, RouterReducerState<any>>('router');\n    }\n\n    export const metaReducers: MetaReducer<IState>[] = !environment.production ? [] : [];\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n    production: false,\n    apiKey: 'AIzaSyDxg6TFVQSJf9tv46YXJ7CIfgoK4ZahWbU',\n    restUrl: 'https://www.googleapis.com/books/v1/',\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":""}